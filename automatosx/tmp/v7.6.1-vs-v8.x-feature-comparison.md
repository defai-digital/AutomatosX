# AutomatosX v7.6.1 vs v8.x Feature Comparison Report

**Report Date**: 2025-11-15
**Analysis Scope**: Complete feature comparison between v7.6.1 (agent-centric) and v8.x (code intelligence-centric)

---

## Executive Summary

AutomatosX underwent a **fundamental architectural pivot** between v7.6.1 and v8.x. The system transitioned from an **agent-centric AI orchestration platform** to a **code intelligence platform with integrated AI capabilities**. This analysis reveals **significant feature losses** in the agent system, setup automation, and team collaboration features.

### Key Findings

- **Lost**: YAML-based agent profiles, abilities system, team configurations, templates
- **Lost**: `ax setup` command that auto-configured `.automatosx/` directory structure
- **Lost**: 60+ ability markdown files defining agent expertise
- **Lost**: 5 team configurations for role-based collaboration
- **Lost**: 9 agent templates for rapid customization
- **Changed**: Agent system from YAML profiles → TypeScript classes (21 agents → 25 hardcoded agents)
- **Changed**: CLI commands from 25 user-facing commands → 22 commands (different focus)
- **Gained**: Tree-sitter parsing, SQLite FTS5 search, LSP server, Web UI, SpecKit auto-generation

---

## Part 1: Git History Analysis

### v7.6.1 Tag Information

```bash
Commit: f2b56a75 - "chore: Release v7.6.1 - Windows spawn fix (Bug #10)"
Date: 2024 (from git log)
Branch: Detached HEAD at v7.6.1
```

### CLI Commands Comparison

#### v7.6.1 CLI Commands (25 total)

**File Location**: `src/cli/commands/*.ts`

```
1. analytics.ts       - Usage analytics and insights
2. cache.ts           - Cache management
3. cleanup.ts         - Cleanup old data
4. cli-interactive.ts - Interactive REPL mode
5. config.ts          - Configuration management
6. configure.ts       - Provider configuration wizard
7. doctor.ts          - System diagnostics
8. flags.ts           - Feature flags management
9. free-tier.ts       - Free tier usage tracking
10. gen.ts            - Code generation
11. gemini.ts         - Gemini provider integration
12. init.ts           - Project initialization
13. list.ts           - List agents/teams/abilities
14. mcp.ts            - MCP (Model Context Protocol) management
15. memory.ts         - Memory operations
16. provider-limits.ts - Provider rate limits
17. providers.ts      - Provider management
18. resume.ts         - Resume workflow from checkpoint
19. run.ts            - **Run agent with task**
20. runs.ts           - View agent execution history
21. session.ts        - Multi-agent session management
22. setup.ts          - **Project setup (CRITICAL)**
23. spec.ts           - Spec-driven development
24. status.ts         - System status
25. update.ts         - Self-update
26. workspace.ts      - Workspace management
```

#### v8.x CLI Commands (22 total)

**File Location**: `src/cli/commands/*.ts`

```
1. agent.ts           - Agent management (NEW)
2. analyze.ts         - Code analysis (NEW)
3. cli.ts             - Interactive CLI (RENAMED from cli-interactive.ts)
4. config.ts          - Configuration management
5. def.ts             - Definition lookup (NEW)
6. find.ts            - Code search (NEW)
7. flow.ts            - Flow analysis (NEW)
8. gen.ts             - Code generation
9. interactive.ts     - Interactive mode (NEW)
10. lint.ts           - Code linting (NEW)
11. memory.ts         - Memory operations
12. monitor.ts        - Monitoring (NEW)
13. perf.ts           - Performance analysis (NEW)
14. provider.ts       - Provider management
15. queue.ts          - Queue management (NEW)
16. ratelimit.ts      - Rate limit management (NEW)
17. speckit.ts        - SpecKit generation (NEW)
18. status.ts         - System status
19. telemetry.ts      - Telemetry management (NEW)
20. watch.ts          - File watcher (NEW)
21. workflow.ts       - Workflow management (NEW)
22. index.ts          - Command registry
```

**Missing from v8.x**:
- ✗ `setup.ts` - **CRITICAL LOSS** - Project setup automation
- ✗ `run.ts` - **CRITICAL LOSS** - Agent execution interface
- ✗ `list.ts` - Agent/team/ability listing
- ✗ `session.ts` - Multi-agent sessions
- ✗ `runs.ts` - Execution history
- ✗ `resume.ts` - Workflow resumption
- ✗ `analytics.ts` - Usage insights
- ✗ `cache.ts` - Cache management
- ✗ `cleanup.ts` - Data cleanup
- ✗ `configure.ts` - Provider wizard
- ✗ `doctor.ts` - System diagnostics
- ✗ `flags.ts` - Feature flags
- ✗ `free-tier.ts` - Usage tracking
- ✗ `gemini.ts` - Gemini integration
- ✗ `init.ts` - Project init
- ✗ `mcp.ts` - MCP management
- ✗ `spec.ts` - Spec-driven dev
- ✗ `update.ts` - Self-update
- ✗ `workspace.ts` - Workspace ops

---

## Part 2: Setup Command Deep Dive

### v7.6.1 `ax setup` Command (LOST in v8.x)

**File**: `src/cli/commands/setup.ts` (1,297 lines)

#### What `ax setup` Created

**Directory Structure**:
```
.automatosx/
├── agents/          # 19-21 YAML agent profiles
├── teams/           # 5 team configurations
├── abilities/       # 60+ markdown ability files
├── templates/       # 9 agent templates
├── memory/          # Memory storage
│   └── exports/     # MCP memory exports
├── sessions/        # Multi-agent sessions
└── logs/            # Execution logs

automatosx/
├── PRD/             # Product Requirements Documents
└── tmp/             # Temporary files

.claude/
└── mcp/             # Claude Code MCP configuration

.gemini/             # Gemini CLI integration (minimal)

Project Root:
├── CLAUDE.md        # Claude Code integration guide
├── GEMINI.md        # Gemini CLI integration guide
├── AGENTS.md        # AGENTS.md standard integration
├── automatosx.config.json  # Main configuration
└── .gitignore       # Updated with AutomatosX entries
```

#### Provider Integrations Configured

**Three AI Provider Integrations**:

1. **Claude Code** (`claude-code`):
   - Default priority: 1 (highest)
   - Command: `claude`
   - MCP configuration files
   - Natural language interface via CLAUDE.md

2. **Gemini CLI** (`gemini-cli`):
   - Default priority: 2
   - Command: `gemini`
   - Natural language interface via GEMINI.md

3. **OpenAI Codex** (`openai`/`codex`):
   - Default priority: 3
   - Command: `codex` or SDK integration
   - Git repository initialization (Codex requires git)
   - See `examples/codex/` for integration

#### Files Created by Setup

**Configuration Files**:
- `automatosx.config.json` - Main configuration with provider settings
- `.gitignore` - AutomatosX entries added

**Integration Files**:
- `CLAUDE.md` - Claude Code natural language integration guide
- `GEMINI.md` - Gemini CLI natural language integration guide
- `AGENTS.md` - Cross-tool agent integration (agents.md standard)
- `.claude/mcp/*.json` - MCP configuration files

**Workspace Files**:
- `automatosx/PRD/README.md` - PRD directory guide
- `automatosx/tmp/README.md` - Temp directory guide

**Example Assets Copied**:
- 19-21 agent YAML profiles from `examples/agents/`
- 60+ ability markdown files from `examples/abilities/`
- 5 team YAML configs from `examples/teams/`
- 9 agent templates from `examples/templates/`

#### Setup Features

**Validation & Safety**:
- Pre-flight environment validation
- Prevents global installation (blocks home directory setup)
- Rollback mechanism on failure
- Force mode with cleanup (`--force`)

**Spec-Kit Integration**:
- Optional GitHub Spec-Kit initialization
- Creates `.specify/` directory with:
  - `spec.md` - Project specification template
  - `plan.md` - Technical plan template
  - `tasks.md` - Dependency task graph template
- Interactive prompt or `--spec-kit` flag
- Skip with `--skip-spec-kit`

**Git Integration**:
- Auto-initializes git repository (for Codex compatibility)
- Non-critical failure (warns if git missing)
- Security-hardened spawn (no shell)

**Permissions**:
- Cross-platform 0o755 permissions (rwxr-xr-x)
- Safe for multi-user/provider scenarios
- Windows ACL compatibility

---

## Part 3: Agent System Comparison

### v7.6.1 Agent System (YAML-Based)

#### Architecture

**Profile-Based System**:
- Agent profiles stored as YAML files
- Separated agent logic from configuration
- Hot-reloadable without code changes
- User-customizable via text editing

**Core Components**:

1. **ProfileLoader** (`src/agents/profile-loader.ts`)
   - Loads YAML profiles from `.automatosx/agents/`
   - Fallback to `examples/agents/`
   - Resolves agent names (supports displayName)
   - Fuzzy search for suggestions

2. **AbilitiesManager** (`src/agents/abilities-manager.ts`)
   - Loads markdown ability files
   - Task-based ability selection
   - Core vs. conditional abilities

3. **TeamManager** (`src/core/team-manager.ts`)
   - Team-based configuration inheritance
   - Shared abilities across team members
   - Provider fallback chains

4. **AgentExecutor** (`src/agents/executor.ts`)
   - Multi-stage execution
   - Delegation to other agents
   - Session management
   - Workspace isolation

#### Agent Profile Structure (YAML)

**Example**: `examples/agents/backend.yaml`

```yaml
name: backend
displayName: Bob
team: engineering
role: Senior Backend Engineer
description: "Expert in server-side architecture, API design, database optimization"

# Abilities (60+ markdown files available)
abilities:
  - code-generation
  - api-design
  - db-modeling
  - caching-strategy
  - performance-analysis
  - golang-best-practices
  - rust-best-practices
  - systems-programming
  - service-resilience
  - observability-integration

# Task-based ability loading
abilitySelection:
  core:
    - api-design
    - db-modeling
    - code-generation

  taskBased:
    api: [api-design, code-generation, service-resilience]
    database: [db-modeling]
    performance: [performance-analysis, caching-strategy]
    rust: [rust-best-practices, systems-programming]
    golang: [golang-best-practices, api-design]

# Multi-agent orchestration
orchestration:
  maxDelegationDepth: 0  # Implementers don't delegate
  canReadWorkspaces: [frontend, data]
  canWriteToShared: true

systemPrompt: |
  You are Bob, a Senior Backend Engineer...
  [detailed personality and expertise]
```

#### Abilities System (60+ Files)

**File Location**: `examples/abilities/*.md`

**Categories**:

**General Engineering** (15 files):
- `clean-code.md` - Clean code principles
- `code-generation.md` - Code generation best practices
- `code-review.md` - Code review checklist
- `debugging.md` - Debugging strategies
- `design-patterns.md` - GoF design patterns
- `refactoring.md` - Refactoring techniques
- `software-architecture.md` - Architecture patterns
- `solid-principles.md` - SOLID principles
- `testing.md` - Test strategies
- `best-practices.md` - General best practices
- `documentation.md` - Documentation standards
- `error-analysis.md` - Error handling
- `performance-analysis.md` - Performance optimization
- `dependency-audit.md` - Dependency management
- `problem-solving.md` - Problem-solving frameworks

**Backend & Infrastructure** (10 files):
- `api-design.md` - REST/GraphQL API design
- `db-modeling.md` - Database schema design
- `caching-strategy.md` - Cache patterns
- `performance.md` - Performance tuning
- `sql-optimization.md` - SQL query optimization
- `data-modeling.md` - Data structure design
- `data-validation.md` - Input validation
- `etl-pipelines.md` - ETL design
- `job-orchestration.md` - Background job patterns
- `infra-as-code.md` - IaC with Terraform

**Frontend & Design** (5 files):
- `component-architecture.md` - React component patterns
- `design-system-implementation.md` - Design system setup
- `state-management.md` - Redux/MobX patterns
- `accessibility.md` - WCAG compliance
- `content-creation.md` - UX writing

**Security & DevOps** (8 files):
- `security-audit.md` - Security review checklist
- `secure-coding-review.md` - Secure code patterns
- `threat-modeling.md` - Threat analysis
- `secrets-policy.md` - Secret management
- `ci-cd.md` - CI/CD pipeline design
- `observability.md` - Logging/metrics/tracing
- `telemetry-diagnostics.md` - System diagnostics
- `release-strategy.md` - Release management

**Specialized Domains** (10 files):
- `quantum-algorithm-design.md` - Quantum algorithms
- `quantum-error-correction.md` - QEC codes
- `quantum-frameworks-transpilation.md` - Qiskit/Cirq
- `quantum-noise-modeling.md` - Noise simulation
- `aerospace-* .md` (4 files) - Orbital mechanics, propulsion, mission analysis
- `mathematical-reasoning.md` - Mathematical proofs
- `literature-review.md` - Research synthesis

**Project-Specific** (4 files):
- `our-architecture-decisions.md` - Team ADRs
- `our-code-review-checklist.md` - Team standards
- `our-coding-standards.md` - Style guide
- `our-project-structure.md` - Repository structure

**Business & Strategy** (8 files):
- `feasibility-study.md` - Technical feasibility
- `idea-evaluation.md` - Idea validation
- `logical-analysis.md` - Logical reasoning
- `longform-report.md` - Report writing
- `risk-assessment.md` - Risk analysis
- `task-planning.md` - Project planning
- `technical-writing.md` - Documentation
- `general-assistance.md` - General help

#### Teams System (5 Teams)

**File Location**: `examples/teams/*.yaml`

**Team Configurations**:

1. **engineering.yaml** - Software Engineers
   ```yaml
   name: engineering
   provider:
     primary: codex
     fallbackChain: [codex, gemini, claude]

   sharedAbilities:
     - our-coding-standards
     - our-project-structure
     - code-generation
     - refactoring
     - testing

   capabilities:
     canDo:
       - Code implementation
       - TDD, API design
       - Bug fixing
       - Performance optimization
     shouldDelegate:
       - Documentation → writer (design team)
       - Security audits → security (core team)

   orchestration:
     maxDelegationDepth: 2
     canReadWorkspaces: [backend, frontend, devops, data]
   ```

2. **design.yaml** - UX/UI & Product
   - Members: design, product, writer
   - Provider: claude (primary)
   - Focus: User experience, product strategy

3. **core.yaml** - Architecture & Quality
   - Members: architecture, quality, security, standard
   - Provider: claude (primary)
   - Focus: System design, code quality, security

4. **business.yaml** - Leadership
   - Members: ceo, cto, creative-marketer
   - Provider: claude (primary)
   - Focus: Strategy, vision, marketing

5. **research.yaml** - Science & Innovation
   - Members: researcher, data-scientist, quantum-engineer, aerospace-scientist
   - Provider: claude (primary)
   - Focus: Research, data science, specialized domains

**Team Benefits**:
- Shared abilities across members
- Provider inheritance with fallback chains
- Self-assessment for intelligent delegation
- Workspace access control

#### Agent Templates (9 Templates)

**File Location**: `examples/templates/*.yaml`

**Available Templates**:

1. **basic-agent.yaml** - Minimal template
2. **assistant.yaml** - General assistant
3. **developer.yaml** - Software developer
4. **fullstack-developer.yaml** - Full-stack (14KB detailed template)
5. **code-reviewer.yaml** - Code review specialist
6. **debugger.yaml** - Debugging expert
7. **designer.yaml** - UX/UI designer
8. **analyst.yaml** - Business analyst
9. **qa-specialist.yaml** - QA engineer

**Template Usage**:
- Copy to `.automatosx/agents/`
- Customize name, abilities, systemPrompt
- Instant agent with team configuration

#### How `ax run <agent> <task>` Worked

**Command Flow** (v7.6.1):

```bash
ax run backend "Create a REST API for user management"
```

**Execution Steps**:

1. **Agent Loading**:
   - ProfileLoader resolves "backend" → `backend.yaml`
   - Loads team config: `engineering.yaml`
   - Inherits team provider: codex → gemini → claude

2. **Ability Selection**:
   - Core abilities loaded: api-design, db-modeling, code-generation
   - Task keywords detected: "REST API"
   - Additional abilities: api-design, service-resilience

3. **Context Creation**:
   - ContextManager combines:
     - Agent profile (role, personality)
     - Abilities (60+ expertise files)
     - Memory (optional: `--memory`)
     - Workspace (isolated directory)
     - Session (multi-agent: `--session`)

4. **Execution**:
   - Router selects provider (codex primary)
   - AgentExecutor runs task
   - Multi-stage if defined in profile
   - Delegation if agent calls other agents

5. **Memory Persistence**:
   - Save to `.automatosx/memory/` (optional: `--save-memory`)
   - Export to `.automatosx/memory/exports/` for MCP

**Key Features**:
- Agent name resolution (supports displayName "Bob")
- Fuzzy search for typos
- Team-based provider fallback
- Task-based ability loading
- Multi-agent delegation
- Session persistence
- Workspace isolation
- Memory injection/saving

#### Delegation & Collaboration

**Example Delegation Flow**:

```
User → ax run architecture "Design microservices system"
  ↓
Architecture Agent (maxDelegationDepth: 3)
  ├→ Delegates to backend: "Design API gateway"
  ├→ Delegates to data: "Design data layer"
  └→ Delegates to devops: "Design infrastructure"
      ↓
      DevOps Agent (maxDelegationDepth: 0)
        └→ Executes without delegation
```

**Delegation Control**:
- `maxDelegationDepth`: Max delegation levels
- `canReadWorkspaces`: Access other agents' workspaces
- `canWriteToShared`: Write to shared workspace
- Team `shouldDelegate`: Delegation guidelines

**Session Management**:
```bash
# Start session with architecture
ax run architecture "Design system" --session my-session

# Join session with backend
ax run backend "Implement API" --session my-session

# Session shares context across agents
```

---

### v8.x Agent System (TypeScript Classes)

#### Architecture

**Hardcoded Class-Based System**:
- Agents defined as TypeScript classes
- Requires code changes to add/modify agents
- Compiled into distribution
- Not user-customizable without rebuilding

**Core Components**:

1. **AgentRegistry** (`src/agents/AgentRegistry.ts`)
   - Central registry for agent classes
   - Agent selection by capability matching
   - Metadata lookup

2. **AgentBase** (`src/agents/AgentBase.ts`)
   - Abstract base class for all agents
   - Common methods: canHandle(), execute(), getMetadata()

3. **AgentRuntime** (`src/agents/AgentRuntime.ts`)
   - Agent execution runtime
   - Task orchestration
   - Collaboration between agents

4. **AgentCollaborator** (`src/agents/AgentCollaborator.ts`)
   - Multi-agent collaboration
   - Task delegation
   - Result aggregation

**No Abilities System**:
- Abilities are hardcoded into agent classes
- No markdown files for expertise
- No task-based loading

**No Teams System**:
- No team configurations
- No provider inheritance
- No delegation guidelines

#### Available Agents (25 TypeScript Classes)

**File Location**: `src/agents/*.ts`

```
1. APIAgent.ts              - API development
2. ArchitectAgent.ts        - System architecture
3. BackendAgent.ts          - Backend engineering
4. CEOAgent.ts              - Executive leadership
5. CTOAgent.ts              - Technical leadership
6. DataAgent.ts             - Data engineering
7. DataScienceAgent.ts      - Data science
8. DatabaseAgent.ts         - Database design
9. DevOpsAgent.ts           - DevOps & infrastructure
10. FrontendAgent.ts        - Frontend development
11. InfrastructureAgent.ts  - Infrastructure
12. MobileAgent.ts          - Mobile development
13. PerformanceAgent.ts     - Performance optimization
14. ProductAgent.ts         - Product management
15. QAAgent.ts              - Quality assurance
16. RefactoringAgent.ts     - Code refactoring
17. SecurityAgent.ts        - Security engineering
18. TestingAgent.ts         - Test engineering
19. UIUXAgent.ts            - UI/UX design
20. WorkflowAgent.ts        - Workflow orchestration
21. AgentBase.ts            - Base class
22. AgentCollaborator.ts    - Collaboration
23. AgentRegistry.ts        - Registry
24. AgentRuntime.ts         - Runtime
25. (Examples in src/agents/*)
```

**No Setup Command**:
- No `ax setup` to initialize agents
- Agents are built-in to the package
- No user customization without code changes

**No Run Command**:
- No `ax run <agent> <task>` interface
- Agents used internally by workflows
- No direct agent execution from CLI

---

## Part 4: Current v8.x State

### Focus Shift

**v7.6.1 Focus**: AI Agent Orchestration Platform
- User runs agents with tasks
- Agents collaborate and delegate
- YAML-based customization
- Team-based organization

**v8.x Focus**: Code Intelligence Platform
- User searches code with queries
- Tree-sitter parsing (45 languages)
- SQLite FTS5 full-text search
- LSP server for editor integration
- Web UI dashboard
- SpecKit auto-generation

### v8.x Core Features

**Code Intelligence**:
- `ax find "query"` - Search codebase
- `ax def "symbol"` - Find definitions
- `ax flow "function"` - Analyze control flow
- `ax lint` - Lint code
- `ax analyze` - Code analysis
- Tree-sitter parsing (45 languages)
- SQLite FTS5 search with BM25 ranking

**AI Integration**:
- Agents used internally (not user-facing)
- Workflow orchestration
- SpecKit generation (ADR, PRD, API specs)
- Natural Language Interface (40+ patterns)
- Iterate Mode (autonomous retry loops)

**Infrastructure**:
- LSP server for VS Code
- Web UI with React + Redux
- Memory system with embeddings
- Provider routing (Claude, Gemini, OpenAI)
- Telemetry & monitoring

**Testing**:
- 745+ tests (100% pass rate)
- Vitest framework
- Integration tests
- Performance benchmarks

### Lost Features Summary

**Completely Removed**:
1. ✗ YAML agent profiles (19-21 agents)
2. ✗ Abilities system (60+ markdown files)
3. ✗ Teams system (5 team configs)
4. ✗ Agent templates (9 templates)
5. ✗ `ax setup` command
6. ✗ `ax run <agent> <task>` command
7. ✗ `ax list agents/teams/abilities`
8. ✗ Session management (`ax session`)
9. ✗ Execution history (`ax runs`)
10. ✗ Resume from checkpoint (`ax resume`)
11. ✗ Multi-agent delegation
12. ✗ Task-based ability loading
13. ✗ Provider inheritance via teams
14. ✗ Workspace isolation
15. ✗ Agent customization via YAML

**Changed to Different Implementation**:
1. Agents: YAML profiles → TypeScript classes
2. Execution: `ax run` → Internal workflow calls
3. Configuration: Team-based → Direct provider config

**Still Present (Different Form)**:
1. Memory system (enhanced with embeddings)
2. Provider routing (enhanced with health checks)
3. Workflow orchestration (ReScript state machines)
4. Configuration (automatosx.config.json)

---

## Part 5: Restoration Roadmap

### Priority 1: Restore `ax setup` Command

**Objective**: Bring back automated project setup

**Tasks**:

1. **Restore setup.ts** (2-3 hours)
   - Copy `src/cli/commands/setup.ts` from v7.6.1
   - Update imports for v8.x structure
   - Test on clean directory

2. **Restore examples/ directory** (1 hour)
   - Copy `examples/agents/` (19-21 YAML files)
   - Copy `examples/abilities/` (60+ markdown files)
   - Copy `examples/teams/` (5 YAML files)
   - Copy `examples/templates/` (9 YAML files)
   - Copy `examples/claude/` (MCP configs)
   - Copy `examples/gemini/` (integration docs)

3. **Update package.json** (30 minutes)
   - Ensure examples/ is included in npm package
   - Add postinstall script if needed

4. **Test setup flow** (1 hour)
   - Test `ax setup` on clean directory
   - Verify all files copied correctly
   - Test force mode, spec-kit integration
   - Test git initialization

**Total Effort**: 4.5-6 hours

**Deliverables**:
- Working `ax setup` command
- `.automatosx/` directory structure
- Integration files (CLAUDE.md, GEMINI.md, AGENTS.md)
- Example agents, abilities, teams, templates

---

### Priority 2: Restore Agent System with Profiles

**Objective**: Enable YAML-based agent execution

**Tasks**:

1. **Restore agent infrastructure** (4-6 hours)
   - Copy `src/agents/profile-loader.ts` from v7.6.1
   - Copy `src/agents/abilities-manager.ts`
   - Copy `src/agents/executor.ts`
   - Copy `src/core/team-manager.ts`
   - Update imports for v8.x

2. **Restore context management** (2-3 hours)
   - Copy `src/agents/context-manager.ts`
   - Copy `src/core/path-resolver.ts`
   - Copy `src/core/session-manager.ts`
   - Copy `src/core/workspace-manager.ts`

3. **Restore run command** (3-4 hours)
   - Copy `src/cli/commands/run.ts` from v7.6.1 (1,072 lines)
   - Update imports
   - Test basic execution
   - Test delegation
   - Test session management

4. **Restore supporting commands** (4-6 hours)
   - `list.ts` - List agents/teams/abilities
   - `session.ts` - Multi-agent sessions
   - `runs.ts` - Execution history
   - `resume.ts` - Resume from checkpoint

5. **Integration testing** (3-4 hours)
   - Test `ax run backend "task"`
   - Test agent delegation
   - Test team provider inheritance
   - Test ability loading
   - Test memory persistence

**Total Effort**: 16-23 hours

**Deliverables**:
- YAML-based agent system
- `ax run <agent> <task>` command
- Agent delegation
- Team configurations
- Ability loading

---

### Priority 3: Restore Provider Integration Setup

**Objective**: Auto-configure Claude Code, Gemini CLI, OpenAI

**Tasks**:

1. **Restore integration docs** (1-2 hours)
   - Copy `examples/claude/CLAUDE_INTEGRATION.md`
   - Copy `examples/gemini/GEMINI_INTEGRATION.md`
   - Update for v8.x architecture

2. **Restore MCP setup** (1 hour)
   - Copy `.claude/mcp/*.json` configs
   - Test MCP tools with Claude Code

3. **Update setup command** (2-3 hours)
   - Add Claude Code integration setup
   - Add Gemini CLI integration setup
   - Add CLAUDE.md, GEMINI.md, AGENTS.md creation
   - Test integration flows

4. **Integration testing** (2 hours)
   - Test `ax setup` creates all files
   - Test Claude Code can call ax agents
   - Test Gemini CLI can use ax agents
   - Test OpenAI Codex compatibility

**Total Effort**: 6-8 hours

**Deliverables**:
- Auto-configured provider integrations
- CLAUDE.md, GEMINI.md, AGENTS.md files
- MCP configuration
- Git initialization

---

### Priority 4: Restore Abilities and Teams

**Objective**: Enable expertise injection and team collaboration

**Tasks**:

1. **Verify abilities system** (2-3 hours)
   - Test AbilitiesManager loads markdown files
   - Test task-based ability selection
   - Test ability content injection into prompts
   - Add missing abilities if any

2. **Verify teams system** (2-3 hours)
   - Test TeamManager loads YAML configs
   - Test provider inheritance
   - Test shared abilities
   - Test delegation guidelines

3. **Documentation** (2 hours)
   - Document ability creation process
   - Document team configuration
   - Document delegation patterns
   - Create migration guide from v7.6.1

4. **Testing** (2-3 hours)
   - Write integration tests
   - Test all 19-21 agents
   - Test all 5 teams
   - Test ability loading

**Total Effort**: 8-11 hours

**Deliverables**:
- Working abilities system
- Working teams system
- Documentation
- Integration tests

---

## Restoration Effort Summary

| Priority | Component | Effort | Complexity |
|----------|-----------|--------|------------|
| P1 | `ax setup` Command | 4.5-6h | Low |
| P2 | Agent System (YAML) | 16-23h | High |
| P3 | Provider Integration | 6-8h | Medium |
| P4 | Abilities & Teams | 8-11h | Medium |
| **Total** | **Full Restoration** | **35-48h** | **Medium-High** |

**Estimated Timeline**: 5-6 working days (8 hours/day)

---

## Recommendations

### Hybrid Approach

Rather than full restoration, consider **hybrid architecture**:

1. **Keep v8.x code intelligence features**:
   - Tree-sitter parsing
   - SQLite FTS5 search
   - LSP server
   - Web UI
   - SpecKit generation

2. **Restore v7.6.1 agent features**:
   - YAML agent profiles
   - `ax setup` command
   - `ax run <agent> <task>`
   - Abilities system
   - Teams system

3. **Benefits of Hybrid**:
   - Best of both worlds
   - Code intelligence + agent orchestration
   - Backward compatibility with v7.6.1 workflows
   - Forward compatibility with v8.x features

### Migration Path

**Phase 1** (Week 1): Core Restoration
- Restore `ax setup` (P1)
- Restore examples/ directory
- Test setup flow

**Phase 2** (Week 2): Agent Execution
- Restore agent infrastructure (P2)
- Restore `ax run` command
- Test basic execution

**Phase 3** (Week 3): Integration
- Restore provider integrations (P3)
- Restore abilities/teams (P4)
- Integration testing

**Phase 4** (Week 4): Polish
- Documentation
- Migration guide
- Release v8.1.0

---

## Conclusion

AutomatosX v7.6.1 → v8.x represents a **fundamental pivot** in product vision:

- **v7.6.1**: Agent-centric AI orchestration platform
  - User runs agents with tasks
  - YAML-based customization
  - Team collaboration
  - 60+ abilities for expertise

- **v8.x**: Code intelligence platform
  - User searches code with queries
  - Tree-sitter parsing
  - LSP server integration
  - Web UI dashboard

**Key Losses**:
- YAML agent profiles, abilities, teams, templates
- `ax setup` command for project initialization
- `ax run <agent> <task>` execution interface
- Multi-agent delegation and sessions
- User customization without code changes

**Restoration Effort**: 35-48 hours (5-6 days)

**Recommendation**: Hybrid architecture combining v8.x code intelligence with v7.6.1 agent orchestration for maximum value and backward compatibility.

---

**Report Author**: Claude (Sonnet 4.5)
**Analysis Date**: 2025-11-15
**File Location**: `/Users/akiralam/code/automatosx/automatosx/tmp/v7.6.1-vs-v8.x-feature-comparison.md`
