# v8.0.1 CI/CD Fix Plan

## Problem

CI is failing with TypeScript errors like:
```
error TS7016: Could not find a declaration file for module './HybridSearchCore.bs.js'
error TS2307: Cannot find module './Js.gen' or its corresponding type declarations.
```

## Root Cause

Files in `src/bridge/` are importing ReScript-generated code using `.gen.js` extension:
```typescript
import * as HybridSearchCore from '../../packages/rescript-core/src/memory/HybridSearchCore.gen.js';
```

However, when TypeScript's module resolution follows these imports, it finds `.gen.tsx` files (TypeScript definition files generated by ReScript's `@genType`) instead of `.bs.js` files (the actual compiled JavaScript).

The `.gen.tsx` files reference other ReScript modules like `./Js.gen`, `./Belt.gen`, etc., which don't exist as separate files - they're part of ReScript's standard library.

## Solution

Change all imports in `src/bridge/` files to use `.bs.js` instead of `.gen.js`:

### Files to Fix:
1. `src/bridge/HybridSearchBridge.ts`:
   - Change `HybridSearchCore.gen.js` → `HybridSearchCore.bs.js`
   - Change `HybridSearchTypes.gen.js` → `HybridSearchTypes.bs.js`
   - Change `MessageTransform.gen.js` → `MessageTransform.bs.js`

2. `src/bridge/StatsAggregationBridge.ts`:
   - Change `StatsAggregation.gen.js` → `StatsAggregation.bs.js`

### Why This Works:

1. `.bs.js` files are the actual compiled JavaScript from ReScript
2. `.gen.tsx` files are just TypeScript definitions (for IDE support)
3. TypeScript should NEVER try to compile `.gen.tsx` files
4. By using `.bs.js`, TypeScript treats them as external JavaScript modules
5. With `skipLibCheck: true` in tsconfig.json, TypeScript won't check their types

### Alternative Considered:

Adding `packages/` to tsconfig paths - rejected because:
- Would require TypeScript to understand Re Script's module system
- Creates tight coupling between build systems
- Doesn't solve the `.gen.tsx` dependency on ReScript stdlib

## Implementation

1. Update imports in bridge files
2. Verify local TypeScript compilation succeeds
3. Commit and push
4. Verify CI passes
